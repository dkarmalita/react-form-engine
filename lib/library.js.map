{"version":3,"sources":["webpack://@kard/react-form-engine/webpack/universalModuleDefinition","webpack://@kard/react-form-engine/webpack/bootstrap","webpack://@kard/react-form-engine/external {\"commonjs\":\"react\",\"commonjs2\":\"react\",\"umd\":\"react\",\"root\":\"React\"}","webpack://@kard/react-form-engine/./src/FormProvider.jsx","webpack://@kard/react-form-engine/./src/utils/combineArraysUnique.js","webpack://@kard/react-form-engine/./src/utils/isObjectsEqual.js","webpack://@kard/react-form-engine/./src/FormComponent.jsx","webpack://@kard/react-form-engine/./src/index.js"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__0__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","_react","FormContext","React","createContext","FormProvider","state","formBuffer","blocked","Component","this","acc","keys","map","fieldName","stateAcc","dirty","touched","valid","reset","_this2","formLink","setFieldState","fieldState","cb","setState","prevState","props","_extends","_defineProperty","onChange","getFieldState","getFieldInitialValue","initialValue","getFormState","_getFormState","getFormValue","_getFormValue","getFieldsState","resetForm","_resetForm","_react2","default","createElement","Provider","children","withFormContext","FormComponent","_Component2","_class","_classCallCheck","_possibleConstructorReturn","__proto__","getPrototypeOf","apply","arguments","_inherits","_createClass","_this4","Consumer","combineArraysUnique","arrA","length","undefined","arrB","concat","forEach","errId","indexOf","push","isObjectsEqual","x","y","constructor","Function","RegExp","valueOf","Array","isArray","Date","every","_isObjectsEqual","_combineArraysUnique","_FormProvider","asField","WrappedField","defaultValue","_FormComponent","_Component","_this","_getInitialValue","_setFieldState","_getFieldState","_setFieldValue","_getFieldValue","_invalidate","_checkFormContext","_setFocused","_getCleanProps","_init","_prepareState","focused","_props","newState","_props2","oldState","_props3","errorShown","console","error","errors","onValidate","disabled","nextErrors","_props4","_objectWithoutProperties","onFocus","onBlur","defaultProps","asInputField","InputComponent","WrappedInput","event","target","asCheckboxField","_Component3","_this6","checked","onClick","onKeyPress","asRadioButtonField","_Component4","_this8","option"],"mappings":"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","file":"library.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"@kard/react-form-engine\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"@kard/react-form-engine\"] = factory(require(\"react\"));\n\telse\n\t\troot[\"@kard/react-form-engine\"] = factory(root[\"React\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","import React, { Component } from 'react'\n\nconst FormContext = React.createContext( null )\n// Note: createContext takes the default context state\n// used while the component in placed outside the context\n\nexport class FormProvider extends Component {\n\n  state = { formBuffer: {}, blocked: false }\n\n  _getFormValue(){\n    const { formBuffer } = this.state\n    const acc = {}\n    Object.keys( formBuffer ).map( fieldName => {\n      acc[fieldName] = formBuffer[fieldName].value\n    })\n    return acc\n  }\n\n  _getFormState(){\n    const { formBuffer } = this.state\n    const stateAcc = { dirty: false, touched: false, valid: true }\n    Object.keys( formBuffer ).map( fieldName => {\n      stateAcc.dirty = stateAcc.dirty || formBuffer[fieldName].dirty\n      stateAcc.touched = stateAcc.touched || formBuffer[fieldName].touched\n      stateAcc.valid = !stateAcc.valid || !formBuffer[fieldName].valid\n    })\n    return stateAcc\n  }\n\n  _resetForm(){\n    const { formBuffer } = this.state\n    Object.keys( formBuffer ).map( fieldName => formBuffer[fieldName].reset())\n  }\n\n  /**\n   * `render` is only used to render the component's children in the context of the\n   * `formLink` structure which contains all of the necessary form-wide fields.\n   * @return {Component}\n   */\n  render(){\n    const formLink = {\n\n      /* field mathods */\n\n      setFieldState : ( fieldName, fieldState, cb ) => this.setState(( prevState, props ) => ({\n        ...prevState,\n        formBuffer : {\n          ...prevState.formBuffer,\n          [fieldName] : fieldState,\n        },\n      }), () => {\n        const { onChange } = this.props\n        if( cb ){ cb() }\n        if( onChange ){ onChange( this.state.formBuffer ) }\n      }),\n\n      getFieldState : ( fieldName ) => this.state.formBuffer[fieldName],\n\n      getFieldInitialValue : ( fieldName ) => ( this.props.initialValue || {})[fieldName],\n\n      /* form methods */\n\n      // __setState : this.setState, // undocumented for now\n\n      getFormState : () => this._getFormState(),\n\n      getFormValue : () => this._getFormValue(),\n\n      getFieldsState : () => this.state.formBuffer,\n\n      resetForm : () => this._resetForm(),\n    }\n\n    return (\n      <FormContext.Provider value={formLink}>\n        {this.props.children}\n      </FormContext.Provider>\n    )\n  }\n\n}\n\n/**\n * HOC which is used to convert Basic Input Components to those connected to the form's context.\n * @param  {Component} FormComponent - one of the Basic Input Components.\n * @return {Component} - Connected to the form's context Component.\n */\nexport const withFormContext = FormComponent =>\n  class extends Component {\n\n    render(){\n      return (\n        <FormContext.Consumer>\n          { formLink => <FormComponent {...this.props} formLink={formLink} /> }\n        </FormContext.Consumer>\n      )\n    }\n\n  }\n","// @kard js snippet\n/**\n * Add elements from arrB to arrA. Each element is addad only if\n * is absent in the arrA.\n * @param  {Array} arrA - array of unique errors ids\n * @param  {Array} arrB - array of unique errors ids to add to errorsBuffer\n * @return {Array]} - combined array of errors\n */\nexport const combineArraysUnique = ( arrA = [], arrB = []) => {\n  const acc = [].concat( arrA )\n\n  // Add only items are not in the list yet\n  arrB.forEach( errId => {\n    if( !~arrA.indexOf( errId )){\n    // ref: https://www.joezimjs.com/javascript/great-mystery-of-the-tilde/\n      acc.push( errId )\n    }\n  })\n\n  return acc\n}\n","// @kard js snippet\n/**\n * isObjectsEqual Deeply chack two objects for equality\n * idea: https://stackoverflow.com/a/16788517\n * @param  {Object}  x - the first object to compare\n * @param  {Object}  y - the second object to compare\n * @return {Boolean} - true when objects equal, false in another case\n */\nexport function isObjectsEqual( x, y ){\n  if( x === null || x === undefined || y === null || y === undefined ){ return x === y }\n\n  // after this just checking type of one would be enough\n  if( x.constructor !== y.constructor ){ return false }\n\n  // if they are functions, they should exactly refer to same one (because of closures)\n  if( x instanceof Function ){ return x === y }\n\n  // if they are regexps, they should exactly refer to same one (it is hard to better equality check on current ES)\n  if( x instanceof RegExp ){ return x === y }\n  if( x === y || x.valueOf() === y.valueOf()){ return true }\n  if( Array.isArray( x ) && x.length !== y.length ){ return false }\n\n  // if they are dates, they must had equal valueOf\n  if( x instanceof Date ){ return false }\n\n  // if they are strictly equal, they both need to be object at least\n  if( !( x instanceof Object )){ return false }\n  if( !( y instanceof Object )){ return false }\n\n  // recursive object equality check\n  var p = Object.keys( x )\n  return Object.keys( y ).every( function( i ){ return p.indexOf( i ) !== -1 })\n        && p.every( function( i ){ return isObjectsEqual( x[i], y[i]) })\n}\n","import React, { Component } from 'react'\nimport { isObjectsEqual } from './utils/isObjectsEqual'\nimport { combineArraysUnique as combineErrors } from './utils/combineArraysUnique'\nimport { withFormContext } from './FormProvider'\n\n/**\n * A link which become a part of error message. Should point to the documentation.\n */\n// eslint-disable-next-line camelcase\nconst helpLink_formBoundaries = 'http://example.com'\n\n/**\n * Note: About field state. Each field has several properties in its state:\n * - value {Any} - contains the field value\n * - errors {Array of Strings} - contains error messages of the current value\n * - focused {Bool} - true while the field focused\n * - dirty {Bool} - true while the field contains changed value\n * - touched {Bool} - true while the field is/was focused\n * - valid {Bool} - true while the field contains no errors\n */\nexport const asField = ( WrappedField, defaultValue = '' ) => {\n  class _FormComponent extends Component {\n\n    static defaultProps = {\n      // defaultValue: '',\n      fieldName  : '',\n      onValidate : () => [],\n    }\n\n    constructor( props ){\n      super( props )\n      this._getInitialValue = this._getInitialValue.bind( this )\n      this._setFieldState = this._setFieldState.bind( this )\n      this._getFieldState = this._getFieldState.bind( this )\n      this._setFieldValue = this._setFieldValue.bind( this )\n      this._getFieldValue = this._getFieldValue.bind( this )\n      this._invalidate = this._invalidate.bind( this )\n      this._setFieldValue = this._setFieldValue.bind( this )\n      this._checkFormContext = this._checkFormContext.bind( this )\n      this._setFocused = this._setFocused.bind( this )\n      this._getCleanProps = this._getCleanProps.bind( this )\n      this._init = this._init.bind( this )\n      this._init()\n    }\n\n    _init(){\n      this._setFieldState({\n        ...this._prepareState( this._getInitialValue()),\n        touched : false,\n        focused : false,\n        reset   : this._init,\n      })\n    }\n\n    /**\n     * The only method to get initial value from the level of form\n     * @return {Any} - initial value or undefined if no value is given\n     */\n    _getInitialValue(){\n      if( !this._checkFormContext()){ return }\n      const { fieldName, formLink } = this.props\n      return formLink.getFieldInitialValue( fieldName ) || defaultValue\n    }\n\n    /**\n     * The only method to set state of the field\n     * @param {Object} newState - the whole field state\n     */\n    _setFieldState( newState ){\n      if( !this._checkFormContext()){ return }\n      const { fieldName, formLink } = this.props\n      const oldState = this._getFieldState()\n      if( isObjectsEqual( oldState, newState )){ return } // prevent state update if no changes in it\n      formLink.setFieldState( fieldName, newState )\n    }\n\n    /**\n     * The only method to get state of the field\n     * @return {Object} - the state of the field\n     */\n    _getFieldState(){\n      if( !this._checkFormContext()){ return }\n      const { fieldName, formLink } = this.props\n      const state = formLink.getFieldState( fieldName )\n      return typeof state != 'undefined' ? state : {}\n    }\n\n    /**\n     * Check if the Component is placed inside a form context.\n     * Puts the error message in the console only one time per component.\n     * @return {Bool} - true while the field is in a form context, false - in other case\n     */\n    _checkFormContext(){\n      if( this.props.formLink ){ return true }\n      if( this.errorShown ){ return false }\n      console.error(\n        `${this.constructor.name} must be used in bounds of FormProvider. `\n        // eslint-disable-next-line camelcase\n        + `Visit ${helpLink_formBoundaries} to learn more about the form boundaries.`\n      )\n      this.errorShown = true\n      return false\n    }\n\n    /**\n     * The only method to prepare the data state for a value within valid, errors and dirty fields filled\n     * @param {Any} newValue - new field value\n     * @return {Object} - field state within all data propeties\n     */\n    _prepareState( value ){\n      const dirty = value !== this._getInitialValue()\n      const errors = this.props.onValidate( value, this._invalidate )\n      const valid = errors.length === 0\n      return { ...this._getFieldState(), value, dirty, errors, valid }\n    }\n\n    /**\n     * The only method to set value of the field. Except the value, the method sets data-related field's properties: valid, errors and dirty.\n     * @param {Any} newValue - new field value\n     */\n    _setFieldValue( value ){\n      if( this.props.disabled ){ return } // only an enabled field can update its value\n      this._setFieldState( this._prepareState( value ))\n    }\n\n    /**\n     * The main method to get field value. _getFieldState is better to use in cases when you need to get fields attributes too.\n     * @return {Any} - the current value of the field\n     */\n    _getFieldValue(){\n      return this._getFieldState().value\n    }\n\n    /**\n     * The method is used to invalidate some value of the field. It is passed as the second paramater to onValidate handler and is used for async invalidation (see example)\n     * @param  {Any} value - a value to invalidate\n     * @param  {Array of Strings} errors - an array of errors found\n     * @return {[type]}        [description]\n     * @example\n     *   function handleOnValidate( value, invalidate ){\n     *     getAsyncErrors( value ).then( { value, errors }=>invalidate( value, errors ) )\n     *     return getSyncErrors( value )\n     *   }\n     */\n    _invalidate( value, errors = []){\n      const state = this._getFieldState()\n      if( state.value !== value || errors.length === 0 ){ return }\n      const nextErrors = combineErrors( state.errors, errors )\n      this._setFieldState({ ...state, errors: nextErrors })\n    }\n\n    /**\n     * The only method to change focused value, keeps its eye on the touched property too.\n     * @param {Bool} focused - the focused state to set.\n     */\n    _setFocused( focused ){\n      const oldState = this._getFieldState()\n      const touched = focused || oldState.focused\n      this._setFieldState({ ...oldState, focused, touched })\n    }\n\n    /**\n     * The only method allows to get props cleaned from form-specific instances, suitable to be passed to a DOM tag.\n     * @return {Objec} - cleaned property set\n     */\n    _getCleanProps(){\n      const {       /* = known field properties = */\n        fieldName,  // used as the field name in the form buffer /* --and as a value of name prop-- */\n        onValidate, // used each time when a change happen to validate the updated value\n        formLink,   // provides the form-level methods\n        // option,  // for multi-controls fields, contains option value for this control\n        ...other\n      } = this.props\n      return other\n    }\n\n    render(){\n      const value = this._getFieldValue()\n      return (\n        <WrappedField\n          {...this._getCleanProps()}\n          value={typeof value != 'undefined' ? value : defaultValue}\n          onChange={( value ) => this._setFieldValue( value )}\n          onFocus={() => this._setFocused( true )}\n          onBlur={() => this._setFocused( false )}\n          // name={ this.props.fieldName }\n        />\n      )\n    }\n\n  }\n\n  return withFormContext( _FormComponent )\n}\n\n/* connection models HOCs */\n\nexport const asInputField = ( InputComponent ) => {\n  class WrappedInput extends Component {\n\n    render(){\n      return (\n        <InputComponent {...this.props}\n          onChange={( event ) => this.props.onChange( event.target.value )}\n        />\n      )\n    }\n\n  }\n  return asField( WrappedInput )\n}\n\nexport const asCheckboxField = ( InputComponent ) => {\n  class WrappedInput extends Component {\n\n    render(){\n      return (\n        <InputComponent {...this.props}\n          onChange={null}\n          checked={this.props.value}\n          onClick={() => this.props.onChange( !this.props.value )}\n          onKeyPress={() => this.props.onChange( !this.props.value )} // add support of keyboard enter\n        />\n      )\n    }\n\n  }\n  return asField( WrappedInput )\n}\n\nexport const asRadioButtonField = ( InputComponent ) => {\n  class WrappedInput extends Component {\n\n    render(){\n      return (\n        <InputComponent {...this.props}\n          onChange={null}\n          checked={this.props.value === this.props.option}\n          onClick={() => this.props.onChange( this.props.option )}\n        />\n      )\n    }\n\n  }\n  return asField( WrappedInput )\n}\n","export { FormProvider, withFormContext } from './FormProvider'\nexport { asField, asInputField, asCheckboxField, asRadioButtonField } from './FormComponent'\n"],"sourceRoot":""}