{"version":3,"sources":["webpack://@kard/react-form-engine/webpack/universalModuleDefinition","webpack://@kard/react-form-engine/webpack/bootstrap","webpack://@kard/react-form-engine/external {\"commonjs\":\"react\",\"commonjs2\":\"react\",\"umd\":\"react\",\"root\":\"React\"}","webpack://@kard/react-form-engine/./src/FormProvider.jsx","webpack://@kard/react-form-engine/./src/FormComponent.jsx","webpack://@kard/react-form-engine/./src/utils/combineArraysUnique.js"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__0__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","FormContext","external_commonjs_react_commonjs2_react_umd_react_root_React_default","a","createContext","FormProvider_FormProvider","_Component","FormProvider","props","_classCallCheck","this","_this","_possibleConstructorReturn","__proto__","getPrototypeOf","state","formBuffer","blocked","onReady","_inherits","external_commonjs_react_commonjs2_react_umd_react_root_React_","_createClass","acc","keys","map","fieldName","stateAcc","dirty","touched","valid","reset","_this2","formLink","setFieldState","fieldState","cb","setState","prevState","_extends","_defineProperty","onChange","getFieldState","getFieldInitialValue","initialValue","getFormState","_getFormState","getFormValue","_getFormValue","getFieldsState","resetForm","_resetForm","createElement","Provider","children","defaultProps","FormProvider_withFormContext","FormComponent","_Component2","_class","apply","arguments","_this4","Consumer","FormComponent_asField","WrappedField","defaultValue","length","undefined","_FormComponent","FormComponent_classCallCheck","FormComponent_possibleConstructorReturn","_getInitialValue","_setFieldState","_getFieldState","_setFieldValue","_getFieldValue","_invalidate","_checkFormContext","_setFocused","_getCleanProps","_init","FormComponent_inherits","FormComponent_createClass","FormComponent_extends","_prepareState","focused","_props","newState","_props2","_props3","errorShown","console","error","constructor","declined","onTest","errors","onValidate","disabled","nextErrors","a1","a2","addEl","el","indexOf","push","forEach","combineArraysUnique","oldState","_props4","_objectWithoutProperties","onFocus","onBlur","FormComponent_asInputField","InputComponent","WrappedInput","event","target","FormComponent_asCheckboxField","_Component3","_this6","checked","onClick","onKeyPress","FormComponent_asRadioButtonField","_Component4","_this8","option"],"mappings":"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","file":"library.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"@kard/react-form-engine\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"@kard/react-form-engine\"] = factory(require(\"react\"));\n\telse\n\t\troot[\"@kard/react-form-engine\"] = factory(root[\"React\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","import React, { Component } from 'react'\n\nconst FormContext = React.createContext( null )\n// Note: createContext takes the default context state\n// used while the component in placed outside the context\n\nexport class FormProvider extends Component {\n\n  static defaultProps = {\n    initialValue : {},\n    onChange     : () => {},\n    onReady      : () => {},\n  }\n\n  state = { formBuffer: {}, blocked: false }\n\n  constructor( props ){\n    super( props )\n    this.props.onReady( this )\n  }\n\n  _getFormValue(){\n    const { formBuffer } = this.state\n    const acc = {}\n    Object.keys( formBuffer ).map( fieldName => {\n      acc[fieldName] = formBuffer[fieldName].value\n    })\n    return acc\n  }\n\n  _getFormState(){\n    const { formBuffer } = this.state\n    const stateAcc = { dirty: false, touched: false, valid: true }\n    Object.keys( formBuffer ).map( fieldName => {\n      stateAcc.dirty = stateAcc.dirty || formBuffer[fieldName].dirty\n      stateAcc.touched = stateAcc.touched || formBuffer[fieldName].touched\n      stateAcc.valid = !stateAcc.valid || !formBuffer[fieldName].valid\n    })\n    return stateAcc\n  }\n\n  _resetForm(){\n    const { formBuffer } = this.state\n    Object.keys( formBuffer ).map( fieldName => formBuffer[fieldName].reset())\n  }\n\n  /**\n   * `render` is only used to render the component's children in the context of the\n   * `formLink` structure which contains all of the necessary form-wide fields.\n   * @return {Component}\n   */\n  render(){\n    const formLink = {\n\n      /* field mathods */\n\n      setFieldState : ( fieldName, fieldState, cb ) => this.setState(( prevState, props ) => ({\n        ...prevState,\n        formBuffer : {\n          ...prevState.formBuffer,\n          [fieldName] : fieldState,\n        },\n      }), () => {\n        const { onChange } = this.props\n        if( cb ){ cb() }\n        onChange( this.state.formBuffer )\n      }),\n\n      getFieldState : ( fieldName ) => this.state.formBuffer[fieldName],\n\n      getFieldInitialValue : ( fieldName ) => this.props.initialValue[fieldName],\n\n      /* form methods */\n\n      // __setState : this.setState, // undocumented for now\n\n      getFormState : () => this._getFormState(),\n\n      getFormValue : () => this._getFormValue(),\n\n      getFieldsState : () => this.state.formBuffer,\n\n      resetForm : () => this._resetForm(),\n    }\n\n    return (\n      <FormContext.Provider value={formLink}>\n        {this.props.children}\n      </FormContext.Provider>\n    )\n  }\n\n}\n\n/**\n * HOC which is used to convert Basic Input Components to those connected to the form's context.\n * @param  {Component} FormComponent - one of the Basic Input Components.\n * @return {Component} - Connected to the form's context Component.\n */\nexport const withFormContext = FormComponent =>\n  class extends Component {\n\n    render(){\n      return (\n        <FormContext.Consumer>\n          { formLink => <FormComponent {...this.props} formLink={formLink} /> }\n        </FormContext.Consumer>\n      )\n    }\n\n  }\n","import React, { Component } from 'react'\n// import { objectsEqual } from './utils/objectsEqual'\nimport { combineArraysUnique as combineErrors } from './utils/combineArraysUnique'\nimport { withFormContext } from './FormProvider'\n\n/**\n * A link which become a part of error message. Should point to the documentation.\n */\n// eslint-disable-next-line camelcase\nconst helpLink_formBoundaries = 'http://example.com'\n\n/**\n * Note: About field state. Each field has several properties in its state:\n * - value {Any} - contains the field value\n * - errors {Array of Strings} - contains error messages of the current value\n * - focused {Bool} - true while the field focused\n * - dirty {Bool} - true while the field contains changed value\n * - touched {Bool} - true while the field is/was focused\n * - valid {Bool} - true while the field contains no errors\n * - declined {Bool} - true when the latest value was declined by onTest handler\n */\nexport const asField = ( WrappedField, defaultValue = '' ) => {\n  class _FormComponent extends Component {\n\n    static defaultProps = {\n      // defaultValue: '',\n      fieldName  : '',\n      onValidate : () => [],\n      onTest     : () => true,\n    }\n\n    constructor( props ){\n      super( props )\n      this._getInitialValue = this._getInitialValue.bind( this )\n      this._setFieldState = this._setFieldState.bind( this )\n      this._getFieldState = this._getFieldState.bind( this )\n      this._setFieldValue = this._setFieldValue.bind( this )\n      this._getFieldValue = this._getFieldValue.bind( this )\n      this._invalidate = this._invalidate.bind( this )\n      this._setFieldValue = this._setFieldValue.bind( this )\n      this._checkFormContext = this._checkFormContext.bind( this )\n      this._setFocused = this._setFocused.bind( this )\n      this._getCleanProps = this._getCleanProps.bind( this )\n      this._init = this._init.bind( this )\n      this._init()\n    }\n\n    _init(){\n      this._setFieldState({\n        ...this._prepareState( this._getInitialValue()),\n        touched : false,\n        focused : false,\n        reset   : this._init,\n      })\n    }\n\n    /**\n     * The only method to get initial value from the level of form\n     * @return {Any} - initial value or undefined if no value is given\n     */\n    _getInitialValue(){\n      if( !this._checkFormContext()){ return }\n      const { fieldName, formLink } = this.props\n      return formLink.getFieldInitialValue( fieldName ) || defaultValue\n    }\n\n    /**\n     * The only method to set state of the field\n     * @param {Object} newState - the whole field state\n     */\n    _setFieldState( newState ){\n      if( !this._checkFormContext()){ return }\n      const { fieldName, formLink } = this.props\n      const oldState = this._getFieldState()\n      // if( objectsEqual( oldState, newState )){ return } // prevent state update if no changes in it\n      formLink.setFieldState( fieldName, newState )\n    }\n\n    /**\n     * The only method to get state of the field\n     * @return {Object} - the state of the field\n     */\n    _getFieldState(){\n      if( !this._checkFormContext()){ return }\n      const { fieldName, formLink } = this.props\n      const state = formLink.getFieldState( fieldName )\n      return typeof state != 'undefined' ? state : {}\n    }\n\n    /**\n     * Check if the Component is placed inside a form context.\n     * Puts the error message in the console only one time per component.\n     * @return {Bool} - true while the field is in a form context, false - in other case\n     */\n    _checkFormContext(){\n      if( this.props.formLink ){ return true }\n      if( this.errorShown ){ return false }\n      console.error(\n        `${this.constructor.name} must be used in bounds of FormProvider. `\n        // eslint-disable-next-line camelcase\n        + `Visit ${helpLink_formBoundaries} to learn more about the form boundaries.`\n      )\n      this.errorShown = true\n      return false\n    }\n\n    /**\n     * The only method to prepare the data state for a value within valid, errors and dirty fields filled\n     * @param {Any} newValue - new field value\n     * @return {Object} - field state within all data propeties\n     */\n    _prepareState( value ){\n      const declined = !this.props.onTest( value )\n      if( declined ){\n        return { ...this._getFieldState(), declined }\n      }\n      const dirty = value !== this._getInitialValue()\n      const errors = this.props.onValidate( value, this._invalidate )\n      const valid = errors.length === 0\n      return { ...this._getFieldState(), value, dirty, errors, valid, declined }\n    }\n\n    /**\n     * The only method to set value of the field. Except the value, the method sets data-related field's properties: valid, errors and dirty.\n     * @param {Any} newValue - new field value\n     */\n    _setFieldValue( value ){\n      if( this.props.disabled ){ return } // only an enabled field can update its value\n      this._setFieldState( this._prepareState( value ))\n    }\n\n    /**\n     * The main method to get field value. _getFieldState is better to use in cases when you need to get fields attributes too.\n     * @return {Any} - the current value of the field\n     */\n    _getFieldValue(){\n      return this._getFieldState().value\n    }\n\n    /**\n     * The method is used to invalidate some value of the field. It is passed as the second paramater to onValidate handler and is used for async invalidation (see example)\n     * @param  {Any} value - a value to invalidate\n     * @param  {Array of Strings} errors - an array of errors found\n     * @return {[type]}        [description]\n     * @example\n     *   function handleOnValidate( value, invalidate ){\n     *     getAsyncErrors( value ).then( { value, errors }=>invalidate( value, errors ) )\n     *     return getSyncErrors( value )\n     *   }\n     */\n    _invalidate( value, errors = []){\n      const state = this._getFieldState()\n      if( state.value !== value || errors.length === 0 ){ return }\n      const nextErrors = combineErrors( state.errors, errors )\n      this._setFieldState({ ...state, errors: nextErrors })\n    }\n\n    /**\n     * The only method to change focused value, keeps its eye on the touched property too.\n     * @param {Bool} focused - the focused state to set.\n     */\n    _setFocused( focused ){\n      const oldState = this._getFieldState()\n      const touched = focused || oldState.focused\n      this._setFieldState({ ...oldState, focused, touched })\n    }\n\n    /**\n     * The only method allows to get props cleaned from form-specific instances, suitable to be passed to a DOM tag.\n     * @return {Objec} - cleaned property set\n     */\n    _getCleanProps(){\n      const {       /* = known field properties = */\n        fieldName,  // used as the field name in the form buffer /* --and as a value of name prop-- */\n        onValidate, // used each time when a change happen to validate the updated value\n        onTest,\n        formLink,   // provides the form-level methods\n        // option,  // for multi-controls fields, contains option value for this control\n        ...other\n      } = this.props\n      return other\n    }\n\n    render(){\n      const value = this._getFieldValue()\n      return (\n        <WrappedField\n          {...this._getCleanProps()}\n          value={typeof value != 'undefined' ? value : defaultValue}\n          onChange={( value ) => this._setFieldValue( value )}\n          onFocus={() => this._setFocused( true )}\n          onBlur={() => this._setFocused( false )}\n          // name={ this.props.fieldName }\n        />\n      )\n    }\n\n  }\n\n  return withFormContext( _FormComponent )\n}\n\n/* connection models HOCs */\n\nexport const asInputField = ( InputComponent ) => {\n  class WrappedInput extends Component {\n\n    render(){\n      return (\n        <InputComponent {...this.props}\n          onChange={( event ) => this.props.onChange( event.target.value )}\n        />\n      )\n    }\n\n  }\n  return asField( WrappedInput )\n}\n\nexport const asCheckboxField = ( InputComponent ) => {\n  class WrappedInput extends Component {\n\n    render(){\n      return (\n        <InputComponent {...this.props}\n          onChange={null}\n          checked={this.props.value}\n          onClick={() => this.props.onChange( !this.props.value )}\n          onKeyPress={() => this.props.onChange( !this.props.value )} // add support of keyboard enter\n        />\n      )\n    }\n\n  }\n  return asField( WrappedInput )\n}\n\nexport const asRadioButtonField = ( InputComponent ) => {\n  class WrappedInput extends Component {\n\n    render(){\n      return (\n        <InputComponent {...this.props}\n          onChange={null}\n          checked={this.props.value === this.props.option}\n          onClick={() => this.props.onChange( this.props.option )}\n        />\n      )\n    }\n\n  }\n  return asField( WrappedInput )\n}\n","// @kard js snippet\n/**\n * Add elements from arrB to arrA. Each element is addad only if\n * is absent in the arrA.\n * @param  {Array} arrA - array of unique errors ids\n * @param  {Array} arrB - array of unique errors ids to add to errorsBuffer\n * @return {Array]} - combined array of errors\n */\nexport const combineArraysUnique = ( a1 = [], a2 = []) => {\n  const acc = []// .concat( arrA )\n\n  const addEl = ( el ) => { if( !~acc.indexOf( el )){ acc.push( el ) } }\n\n  // Add only items are not in the list yet\n  a1.forEach( addEl )\n\n  // Add only items are not in the list yet\n  a2.forEach( addEl )\n\n  return acc\n}\n"],"sourceRoot":""}